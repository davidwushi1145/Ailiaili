# Ailiaili

**åŸºäº Spring Boot çš„ä»¿bilibiliå…¨æ ˆé¡¹ç›®**

[å‰ç«¯é¡¹ç›®é“¾æ¥](https://github.com/davidwushi1145/bilibili_front)

Java+Springboot+Mysql+JWT+FastJson+Mybatis Plus+RocketMQ+elasticSearch+Redis+mahout+kibana

---

## ä»€ä¹ˆæ˜¯Ailiaili?

ä¸€ä¸ªæ–¹ä¾¿ã€å®ç”¨çš„åœ¨çº¿è§†é¢‘åˆ›ä½œã€å‘å¸ƒã€è§‚çœ‹å¹³å°ã€‚è¯¥å¹³å°æ˜¯ä¸€ä¸ªä»¥åœ¨çº¿è§†é¢‘ä¸ºä¸»çš„ç¤¾åŒºå¹³å°ï¼Œæä¾›å¤šæ ·åŒ–çš„å†…å®¹ï¼Œä»¥å¼¹å¹•è¯„è®ºç³»ç»Ÿã€ç”¨æˆ·äº’åŠ¨ä¸ºç‰¹è‰²

- ğŸ“ **å››å¤§æ ¸å¿ƒ** - æœ¬é¡¹ç›®å®ç°äº†å››å¤§æ ¸å¿ƒåŠŸèƒ½ï¼šæ™®é€šç”¨æˆ·ã€å†…å®¹åˆ›ä½œè€…ã€å¹¿å‘Šä¸»ã€å¹³å°ç®¡ç†å‘˜
- ğŸ¨ **å¼ºå¤§çš„é˜²XSSèƒ½åŠ›** - ç”¨æˆ·æ¨¡å—è¿ç”¨ä¸‰ç§ç®—æ³•ï¼ˆRSAï¼ŒMD5ï¼ŒAESï¼‰å®ç° JWT-Token ç™»å½•
- ğŸ§‘â€ğŸ’» **è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ** - å°†ç™»å½•æ¨¡å¼è¿›ä¸€æ­¥æ”¹é€ æˆåŒä»¤ç‰Œç™»å½•ï¼ˆRefreshTokenï¼‰ï¼Œå®ç°è‡ªåŠ¨åˆ·æ–°Tokenï¼Œå¤§å¤§æå‡äº†ç”¨æˆ·ä½“éªŒ
- ğŸ¤¹ **ç²¾ç»†åŒ–ä¸”å¯æ‹“å±•çš„æ•°æ®åº“è®¾è®¡** - ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä»¥åŠæ•°æ®åº“è¡¨è®¾è®¡ï¼ˆç”¨æˆ·è¡¨ï¼Œæƒé™è¡¨ï¼Œè§’è‰²è¡¨ï¼Œå…³è”è¡¨ï¼‰ï¼Œè®¾è®¡äº†ä¸€å¥—å¯æ‹“å±•çš„æƒé™ä½“ç³»ï¼Œå®ç°é¡µé¢ï¼Œæ¥å£ï¼Œæ•°æ®ç­‰å±‚é¢çš„ç²¾ç»†åŒ–æƒé™æ§åˆ¶
- ğŸ¥ **ä¼˜åŒ–çš„å“åº”é€Ÿåº¦** -ä½¿ç”¨Redisç¼“å­˜åŠ¨æ€ç›¸å…³ä¿¡æ¯ï¼Œæå‡äº†åŠ¨æ€åˆ—è¡¨ä»¥åŠè§†é¢‘æµçš„å“åº”é€Ÿåº¦ä¸å®æ—¶æ€§ï¼Œé™ä½æ•°æ®åº“å‹åŠ›
- ğŸ“¤ **æ¶ˆæ¯å¼‚æ­¥** - ä½¿ç”¨RocketMQå®ç°åŠ¨æ€æ¶ˆæ¯å¼‚æ­¥æ¨é€ï¼Œè§†é¢‘æ–‡ä»¶ä¿¡æ¯å¼‚æ­¥å­˜å‚¨ï¼Œæ•°æ®åº“å¼‚æ­¥æ›´æ–°ç­‰ï¼Œæå‡äº†åŠ¨æ€å‘é€ï¼Œè§†é¢‘ä¸Šä¼ çš„é€Ÿåº¦ï¼Œå¤§å¤§é™ä½äº†æœåŠ¡å™¨çš„å‹åŠ›
- ğŸ›  **ç²¾ç¡®ä¸”ä¸°å¯Œçš„æŠ¥è¡¨åŠæœç´¢ç³»ç»Ÿ** - ä½¿ç”¨ElasticSearchå®ç°å…¨æ–‡æ£€ç´¢å¹¶ä¸”é«˜äº®æœç´¢å­—æ®µï¼Œè®©ç”¨æˆ·æ‹¥æœ‰è‰¯å¥½çš„æœç´¢ä½“éªŒï¼Œä½¿ç”¨ElasticSearch+kibanaå®ŒæˆæŠ¥è¡¨ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§æ•°æ®å±•ç¤ºæ¨¡å¼

- ğŸ“ **ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ** - ä½¿ç”¨Mahoutæ¨èç®—æ³•é‡åŒ–ç”¨æˆ·è¡Œä¸ºï¼Œæ ¹æ®ç”¨æˆ·å–œå¥½è¿›è¡Œä¸ªæ€§åŒ–æ¨è
- ğŸ¨ **çœŸâ€”å®æ—¶ç³»ç»Ÿ** - ä½¿ç”¨WebSocketå®ç°é•¿è¿æ¥ï¼Œå‘é€å®æ—¶å¼¹å¹•ï¼Œè¿›è¡Œåœ¨çº¿è§‚çœ‹äººæ•°ç»Ÿè®¡ï¼Œè¿›è¡Œç«™å†…ä¿¡å‘é€
- ğŸ§‘â€ğŸ’» **è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ** - å°†ç™»å½•æ¨¡å¼è¿›ä¸€æ­¥æ”¹é€ æˆåŒä»¤ç‰Œç™»å½•ï¼ˆRefreshTokenï¼‰ï¼Œå®ç°è‡ªåŠ¨åˆ·æ–°Tokenï¼Œå¤§å¤§æå‡äº†ç”¨æˆ·ä½“éªŒ
- ğŸ¤¹ **ä¼˜ç§€çš„é€‚åº”èƒ½åŠ›** - åŸºäºB/Sæ¶æ„å®ç°ï¼Œå¿…é¡»é‡‡ç”¨å“åº”å¼è®¾è®¡ï¼Œé€‚é…ä¸åŒå°ºå¯¸çš„ç§»åŠ¨è®¾å¤‡ã€‚
- ğŸ¥ **å¼ºå¤§çš„å¯è¿ç§»æ€§** -é¡¹ç›®é«˜åº¦æ¨¡å—åŒ–ï¼Œå¯è¿ç§»è‡³spring cloudæˆ–k8s

<img src="https://raw.githubusercontent.com/davidwushi1145/photo2/d07bcd4a020cfa5de9b7a52aafa094abcc2254d1/123.png" alt="123"/>

## é¡¹ç›®å¯åŠ¨æ–¹æ³•

### æœ¬åœ°å¼€å‘

#### ä½¿ç”¨sqlæ–‡ä»¶å¤¹å†…çš„è„šæœ¬åˆ›å»ºbilibiliæ•°æ®åº“

![image-20240102181743140](https://raw.githubusercontent.com/davidwushi1145/photo2/main/image-20240102181743140.png)

#### å®‰è£…docker

##### å®‰è£…rocketmq

è‡ªè¡Œæ‹‰å–æœ€æ–°é•œåƒå®‰è£…å³å¯:å¦‚https://hub.docker.com/r/xuchengen/rocketmq

æˆ–è€…å‚è€ƒï¼šhttps://wushiqwq.cn/archives/663

##### å®‰è£…elasticsearch

è‡ªè¡Œæ‹‰å–æœ€æ–°é•œåƒå®‰è£…å³å¯:é¡¹ç›®å¼€å‘æµ‹è¯•ä½¿ç”¨çš„ä¸ºelasticsearch:7.13.1

##### å®‰è£…kibana

è‡ªè¡Œæ‹‰å–æœ€æ–°é•œåƒå®‰è£…å³å¯:é¡¹ç›®å¼€å‘æµ‹è¯•ä½¿ç”¨çš„ä¸ºkibana:7.13.1

#### è‡ªè¡Œé…ç½®application.properties

å¡«å†™è…¾è®¯äº‘cosçš„é…ç½®

```
cos.client.accessKey=
cos.client.secretKey=
cos.client.region=
cos.client.bucket=
```

æˆ–è€…é€‰æ‹©ä½¿ç”¨FastDFS

é…ç½®å¥½å…¶ä»–å‚æ•°

```properties
spring.datasource.url=jdbc:mysql://localhost:3306/bilibili?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=UTC
spring.datasource.username=root

spring.datasource.password=

spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.hikari.max-lifetime=120000

spring.redis.host=localhost
spring.redis.port=6379
spring.redis.password=

spring.servlet.multipart.max-file-size=512MB
spring.servlet.multipart.max-request-size=1024MB

spring.application.name=bilibili
#spring.profiles.active=dev
#logging.level.org.springframework.data=DEBUG
logging.level.com.bilibili.api=DEBUG
logging.level.com.bilibili.service=DEBUG

mybatis-plus.mapper-locations=classpath:mapper/*.xml
mybatis-plus.type-aliases-package=mapper

fdfs.http.storage-addr=http://localhost:8080
fdfs.tracker-list=localhost:22122

rocketmq.name.server.address= 127.0.0.1:9876
rocketmq.producer.group=xfg-group
rocketmq.consumer.group=xfg-group


cos.client.accessKey=
cos.client.secretKey=
cos.client.region=
cos.client.bucket=

spring.elasticsearch.url=127.0.0.1

```

## è´¡çŒ®

å¦‚å­˜åœ¨bugï¼Œæ¬¢è¿æäº¤issueåŠpull requst
